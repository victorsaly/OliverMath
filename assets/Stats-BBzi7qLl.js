import{a as N,w as z,i as L,x as E,y as F,z as T,A as V,n as j,o as J,p as G,q as Q,m as R}from"./ionic-core-QKhxqlE1.js";import{_ as C,t as w,g as K,l as U,a as W,b as X,c as Y}from"./index-BWb6MThV.js";import{t as i,v as h,y as t,D as s,F as y,G as v,q as d,E as S,l as p,z as g,B as q,n,x as l,A as f}from"./vue-vendor--Omo8iNx.js";import"./speech-sdk-COlTfjHb.js";const Z={name:"Achievements",components:{IonIcon:N},props:{stats:{type:Object,required:!0}},data(){return{lockClosedIcon:U,badges:[{id:"first_correct",icon:"badge-star",nameKey:"firstCorrect",descKey:"firstCorrectDesc",target:1,progress:0,unlocked:!1,unlockedDate:null},{id:"ten_correct",icon:"badge-ten",nameKey:"tenCorrect",descKey:"tenCorrectDesc",target:10,progress:0,unlocked:!1,unlockedDate:null},{id:"hundred_correct",icon:"badge-hundred",nameKey:"hundredCorrect",descKey:"hundredCorrectDesc",target:100,progress:0,unlocked:!1,unlockedDate:null},{id:"five_streak",icon:"badge-fire",nameKey:"fiveStreak",descKey:"fiveStreakDesc",target:5,progress:0,unlocked:!1,unlockedDate:null},{id:"ten_streak",icon:"badge-blaze",nameKey:"tenStreak",descKey:"tenStreakDesc",target:10,progress:0,unlocked:!1,unlockedDate:null},{id:"perfect_operator",icon:"badge-perfect",nameKey:"perfectOperator",descKey:"perfectOperatorDesc",target:100,progress:0,unlocked:!1,unlockedDate:null},{id:"hundred_stars",icon:"badge-crown",nameKey:"hundredStars",descKey:"hundredStarsDesc",target:100,progress:0,unlocked:!1,unlockedDate:null}]}},methods:{t(e){return w(K(),e)},formatDate(e){return e?new Date(e).toLocaleDateString():""},loadPersistedBadges(){try{const e=localStorage.getItem("achievementBadges");if(e){const a=JSON.parse(e);this.badges.forEach(u=>{a[u.id]&&(u.unlocked=a[u.id].unlocked,u.unlockedDate=a[u.id].unlockedDate)})}}catch(e){console.warn("Failed to load badges:",e)}},saveBadges(){try{const e={};this.badges.forEach(a=>{a.unlocked&&(e[a.id]={unlocked:a.unlocked,unlockedDate:a.unlockedDate})}),localStorage.setItem("achievementBadges",JSON.stringify(e))}catch(e){console.warn("Failed to save badges:",e)}},unlockBadge(e){this.badges[e].unlocked||(this.badges[e].unlocked=!0,this.badges[e].unlockedDate=Date.now(),this.saveBadges())},updateBadgeProgress(){var a;this.badges[0].progress=this.stats.correct>0?1:0,this.stats.correct>=1&&this.unlockBadge(0),this.badges[1].progress=Math.min(this.stats.correct,10),this.stats.correct>=10&&this.unlockBadge(1),this.badges[2].progress=Math.min(this.stats.correct,100),this.stats.correct>=100&&this.unlockBadge(2),this.badges[3].progress=Math.min(this.stats.bestStreak||0,5),(this.stats.bestStreak||0)>=5&&this.unlockBadge(3),this.badges[4].progress=Math.min(this.stats.bestStreak||0,10),(this.stats.bestStreak||0)>=10&&this.unlockBadge(4),((a=this.stats.operatorStats)==null?void 0:a.some(u=>u.accuracy===100&&u.total>=10))&&(this.badges[5].progress=100,this.unlockBadge(5)),this.badges[6].progress=Math.min(this.stats.stars||0,100),(this.stats.stars||0)>=100&&this.unlockBadge(6)}},watch:{stats:{handler(){this.updateBadgeProgress()},deep:!0}},mounted(){this.loadPersistedBadges(),this.updateBadgeProgress()}},$={class:"achievements-container"},tt={class:"achievements-title"},et={class:"badges-grid"},st={class:"badge-info"},at={class:"badge-name"},ot={class:"badge-description"},rt={key:0,class:"badge-progress"},ct={class:"progress-bar"},nt={class:"progress-text"},it={key:1,class:"badge-unlocked-date"};function lt(e,a,u,k,_,r){const m=d("ion-icon");return i(),h("div",$,[t("h3",tt,s(r.t("achievements")),1),t("div",et,[(i(!0),h(y,null,v(_.badges,c=>(i(),h("div",{key:c.id,class:S(["badge-card",{unlocked:c.unlocked}])},[t("div",{class:S(["badge-icon",c.icon])},[c.unlocked?g("",!0):(i(),p(m,{key:0,icon:_.lockClosedIcon,class:"lock-icon"},null,8,["icon"]))],2),t("div",st,[t("h4",at,s(r.t(c.nameKey)),1),t("p",ot,s(r.t(c.descKey)),1),c.progress<c.target?(i(),h("div",rt,[t("div",ct,[t("div",{class:"progress-fill",style:q({width:c.progress/c.target*100+"%"})},null,4)]),t("span",nt,s(c.progress)+"/"+s(c.target),1)])):(i(),h("div",it," ✓ "+s(r.t("unlockedOn"))+" "+s(r.formatDate(c.unlockedDate)),1))])],2))),128))])])}const dt=C(Z,[["render",lt],["__scopeId","data-v-ee2d9adc"]]),ut={name:"Stats",components:{IonPage:R,IonHeader:Q,IonToolbar:G,IonTitle:J,IonContent:j,IonCard:V,IonCardHeader:T,IonCardTitle:F,IonCardContent:E,IonButtons:L,IonBackButton:z,Achievements:dt},data(){return{selectedLanguage:K(),stars:0,starsDisplay:"0",stats:{total:0,correct:0,accuracy:0},operatorStats:[],recentHistory:[],achievementStats:{correct:0,bestStreak:0,stars:0,operatorStats:[]}}},methods:{t(e){return w(this.selectedLanguage,e)},loadStats(){const e=W();this.stats={total:e.total,correct:e.correct,accuracy:e.accuracy},this.operatorStats=X().sort((u,k)=>k.total-u.total);const a=Y();this.recentHistory=a.slice(0,10),this.stars=parseInt(localStorage.getItem("stars")||0),this.starsDisplay=Math.min(this.stars,100)>=100?"100 ⭐":Math.min(this.stars,100).toString(),this.achievementStats={correct:e.correct,bestStreak:parseInt(localStorage.getItem("bestStreak")||0),stars:this.stars,operatorStats:this.operatorStats}}},mounted(){this.loadStats()}},_t={class:"star-hero"},ht={class:"star-circle"},pt={class:"star-count"},gt={class:"star-subtitle"},kt={class:"quick-stats-row"},mt={class:"quick-stat"},ft={class:"quick-value"},yt={class:"quick-label"},vt={class:"quick-stat success"},St={class:"quick-value"},bt={class:"quick-label"},Dt={class:"quick-stat accent"},Bt={class:"quick-value"},It={class:"quick-label"},Ct={class:"operator-grid"},wt={class:"operator-symbol"},Kt={class:"operator-bar-container"},qt={class:"operator-info"},At={class:"operator-accuracy"},Ot={class:"operator-attempts"},Ht={class:"recent-problems-list"},Pt={class:"problem-left"},xt={class:"problem-equation"},Mt={class:"problem-right"},Nt={class:"result-icon"},zt={key:0,class:"wrong-answer"};function Lt(e,a,u,k,_,r){const m=d("ion-back-button"),c=d("ion-buttons"),A=d("ion-title"),O=d("ion-toolbar"),H=d("ion-header"),b=d("ion-card-title"),D=d("ion-card-header"),B=d("ion-card-content"),I=d("ion-card"),P=d("Achievements"),x=d("ion-content"),M=d("ion-page");return i(),p(M,null,{default:n(()=>[l(H,null,{default:n(()=>[l(O,{color:"primary"},{default:n(()=>[l(c,{slot:"start"},{default:n(()=>[l(m,{"default-href":"/"})]),_:1}),l(A,null,{default:n(()=>[f(s(r.t("stats")),1)]),_:1})]),_:1})]),_:1}),l(x,{class:"ion-padding stats-content"},{default:n(()=>[t("div",_t,[t("div",ht,[a[0]||(a[0]=t("span",{class:"star-emoji"},"⭐",-1)),t("span",pt,s(_.starsDisplay),1)]),t("p",gt,s(r.t("totalStars")),1)]),t("div",kt,[t("div",mt,[t("span",ft,s(_.stats.total),1),t("span",yt,s(r.t("totalProblems")),1)]),t("div",vt,[t("span",St,s(_.stats.correct),1),t("span",bt,s(r.t("correctAnswers")),1)]),t("div",Dt,[t("span",Bt,s(_.stats.accuracy)+"%",1),t("span",It,s(r.t("accuracy")),1)])]),_.operatorStats.length>0?(i(),p(I,{key:0,class:"performance-section"},{default:n(()=>[l(D,null,{default:n(()=>[l(b,null,{default:n(()=>[f(s(r.t("performanceByOperator")),1)]),_:1})]),_:1}),l(B,null,{default:n(()=>[t("div",Ct,[(i(!0),h(y,null,v(_.operatorStats,o=>(i(),h("div",{key:o.operator,class:"operator-item"},[t("div",wt,s(o.operator),1),t("div",Kt,[t("div",{class:"operator-bar",style:q({width:o.accuracy+"%"})},null,4)]),t("div",qt,[t("span",At,s(o.accuracy)+"%",1),t("span",Ot,s(o.total)+" "+s(o.total===1?r.t("attempt"):r.t("attempts")),1)])]))),128))])]),_:1})]),_:1})):g("",!0),_.recentHistory.length>0?(i(),p(I,{key:1,class:"answer-details-section"},{default:n(()=>[l(D,null,{default:n(()=>[l(b,null,{default:n(()=>[f(s(r.t("recentAnswers")),1)]),_:1})]),_:1}),l(B,null,{default:n(()=>[t("div",Ht,[(i(!0),h(y,null,v(_.recentHistory,o=>(i(),h("div",{key:o.id,class:S(["recent-problem",o.isCorrect?"correct":"incorrect"])},[t("div",Pt,[t("span",xt,s(o.num1)+" "+s(o.operator)+" "+s(o.num2)+" = "+s(o.correctAnswer),1)]),t("div",Mt,[t("span",Nt,s(o.isCorrect?"✓":"✗"),1),o.isCorrect?g("",!0):(i(),h("span",zt,s(o.userAnswer),1))])],2))),128))])]),_:1})]),_:1})):g("",!0),l(P,{stats:_.achievementStats},null,8,["stats"])]),_:1})]),_:1})}const jt=C(ut,[["render",Lt],["__scopeId","data-v-d5cef100"]]);export{jt as default};
